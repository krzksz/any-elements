!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.smoll={})}(this,function(e){var t=function(e){e._smoll=this,this.$element=e,this.$listeners=[]};t.prototype.attachEventListener=function(e,t,n,o){void 0===o&&(o=!1),o&&(n=n.bind(this)),e.addEventListener(t,n),this.$listeners.push({element:e,event:t,listener:n})},t.prototype.detachEventListener=function(e,t,n){this.$listeners=this.$listeners.filter(function(o){return o.element!==e||o.event!==t||o.listener!==n||(e.removeEventListener(n),!1)})},t.prototype.destructor=function(){this.$listeners.forEach(function(e){e.element.removeEventListener(e.event,e.listener)}),this.$listeners=[]};var n=[],o=null,r=function(e,t){e._smoll||new t.constructor(e)},i=function(e){e.nodeType===Node.ELEMENT_NODE&&n.forEach(function(t){e.matches(t.selector)&&r(e,t);for(var n=e.querySelectorAll(t.selector),o=0;o<n.length;o++)r(n[o],t)})},s=function(e){e._smoll&&e._smoll.destructor()},c=function(e){if(e.nodeType===Node.ELEMENT_NODE){s(e);for(var t=e.querySelectorAll("*"),n=0;n<t.length;n++)s(t[n])}},l=function(e){e.forEach(function(e){for(var t=e.removedNodes,n=0;n<t.length;n++)c(t[n]);for(var o=e.addedNodes,r=0;r<o.length;r++)i(o[r])})},u=function(e){void 0===e&&(e=document.body),o&&(o.disconnect(),o=null,c(e))};e.Component=t,e.register=function(e,t){n.push({selector:e,constructor:t})},e.unregister=function(e){n=n.filter(function(t){return t.selector!==e})},e.attach=function(e){void 0===e&&(e=document.body),u(),o=new MutationObserver(l).observe(e,{childList:!0,subtree:!0}),i(e)},e.detach=u});
