var t=function(t){this.element=t,t.kompot=this};t.prototype.destructor=function(){},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var e=[],o=null,n=function(t,e){t.setAttribute("data-kompot",e.name),t.kompot=new e.constructor(t)},r=function(t){t.nodeType===Node.ELEMENT_NODE&&e.forEach(function(e){t.matches(e.selector+":not([data-kompot])")&&n(t,e);for(var o=t.querySelectorAll(e.selector+":not([data-kompot])"),r=0;r<o.length;r++)n(o[r],e)})},c=function(t){t.removeAttribute("data-kompot"),t.kompot.destructor()},a=function(t){if(t.nodeType===Node.ELEMENT_NODE){t.hasAttribute("data-kompot")&&c(t);for(var e=t.querySelectorAll("[data-kompot]"),o=e.length,n=0;n<o;n++)c(e[n])}},s=function(t){t.forEach(function(t){for(var e=t.removedNodes,o=e.length,n=0;n<o;n++)a(e[n]);for(var c=t.addedNodes,s=c.length,u=0;u<s;u++)r(c[u])})},u=function(){o&&(o.disconnect(),o=null)};exports.Component=t,exports.register=function(t,o,n){e.push({selector:t,name:o,constructor:n})},exports.unregister=function(t,o){e=e.filter(function(e){return e.selector!==t&&e.name!==o})},exports.attach=function(t){void 0===t&&(t=document.body),u(),o=new MutationObserver(s).observe(t,{childList:!0,subtree:!0}),r(t)},exports.detach=u;
//# sourceMappingURL=kompot.js.map
