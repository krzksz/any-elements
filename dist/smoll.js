var e=function(e){e._smoll=this,this.$element=e,this.$listeners=[]};e.prototype.attachEventListener=function(e,t,n,o){void 0===o&&(o=!1),o&&(n=n.bind(this)),e.addEventListener(t,n),this.$listeners.push({element:e,event:t,listener:n})},e.prototype.detachEventListener=function(e,t,n){this.$listeners=this.$listeners.filter(function(o){return o.element!==e||o.event!==t||o.listener!==n||(e.removeEventListener(n),!1)})},e.prototype.destructor=function(){this.$listeners.forEach(function(e){e.element.removeEventListener(e.event,e.listener)}),this.$listeners=[]};var t=[],n=null,o=function(e,t){e._smoll||new t.constructor(e)},r=function(e){e.nodeType===Node.ELEMENT_NODE&&t.forEach(function(t){e.matches(t.selector)&&o(e,t);for(var n=e.querySelectorAll(t.selector),r=0;r<n.length;r++)o(n[r],t)})},s=function(e){e._smoll&&e._smoll.destructor()},i=function(e){if(e.nodeType===Node.ELEMENT_NODE){s(e);for(var t=e.querySelectorAll("*"),n=0;n<t.length;n++)s(t[n])}},c=function(e){e.forEach(function(e){for(var t=e.removedNodes,n=0;n<t.length;n++)i(t[n]);for(var o=e.addedNodes,s=0;s<o.length;s++)r(o[s])})},l=function(e){void 0===e&&(e=document.body),n&&(n.disconnect(),n=null,i(e))};exports.Component=e,exports.register=function(e,n){t.push({selector:e,constructor:n})},exports.unregister=function(e){t=t.filter(function(t){return t.selector!==e})},exports.attach=function(e){void 0===e&&(e=document.body),l(),n=new MutationObserver(c).observe(e,{childList:!0,subtree:!0}),r(e)},exports.detach=l;
